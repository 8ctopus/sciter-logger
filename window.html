<html>
<head>
<title>Test</title>
<script type="module">

import {logger} from "src/logger.js";
import * as utils from "vendor/8ctopus/sciter-utils/src/utils.js";

// get console from parent window
logger.setConsole();

console.log("logging from new window");

// capture unhandled exceptions
logger.capture();

document.on("ready", function() {
    try {
        // close window on escape key press
        utils.closeWindowOnEscape(Window.this);

        // test handled exception
        throw new Error("window handled exception");
    }
    catch (e) {
        console.exception(`${e.message} ${e.stack}`);
    }

    // test unhandled exception
    throw new Error("window unhandled exception");
});

document.on("click", "button", function() {
    console.log("new window button clicked");
});

</script>
</head>
<body>
    <button>button</button>
</body>
</html>
