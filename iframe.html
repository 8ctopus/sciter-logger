<html>
<head>
<title>Test</title>
<script type="module">

import {logger} from "src/logger.js";

// wait for frame to finish loading
document.on("complete", function() {
    // get console from parent window
    logger.setConsole();

    console.log("logging from iframe");

    // capture unhandled exceptions
    logger.capture();
});

document.on("click", "button", function() {
    console.log("iframe button clicked");

    try {
        // test handled exception
        throw new Error("iframe handled exception");
    }
    catch (e) {
        console.exception(e);
    }

    // test unhandled exception
    throw new Error("iframe unhandled exception");
});

</script>
</head>
<body>
    <button>button in iframe</button>
</body>
</html>
