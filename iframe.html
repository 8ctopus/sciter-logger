<html>
<head>
<title>Test</title>
<script type="module">

import {logger} from "src/logger.js";

console.log(`logger attached to console - ${logger.isAttached()}`);

// get console from iframe parent
logger.setConsole();

console.log(`logger attached to console - ${logger.isAttached()}`);

console.log("logging from iframe");

// capture unhandled exceptions
logger.capture();

document.on("click", "button", function() {
    console.log("iframe button clicked");

    try {
        // test handled exception
        throw new Error("iframe handled exception");
    }
    catch (e) {
        console.exception(`${e.message} ${e.stack}`);
    }

    // test unhandled exception
    throw new Error("iframe unhandled exception");
});

</script>
</head>
<body>
    <button>button in iframe</button>
</body>
</html>
