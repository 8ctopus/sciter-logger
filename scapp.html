<html
    window-resizable="true"
    window-width="500dip"
    window-height="300dip"
>
<head>
<title>sciter logger demo</title>
<style>

plaintext#logger {
    size: *;
}

</style>
<script src="js/utils.js" />
<script src="js/logger.js" />
<script type="module">

import {logger} from "src/logger.js";

// get file url
const url = __DIR__ + "test.log";

// get file path
const file = URL.toPath(url);

//console.log(`url - ${url}\nfile - ${file}`);

// initialize logger
logger.init(file, true);

// export logger for second window to see it
globalThis.logger = logger;

document.on("ready", function() {
    try {
        // test logger
        logger.log("new logger test");
        logger.warn("warning");
        logger.error("error");
    }
    catch (e) {
        console.log(`${e.message} ${e.stack}`);
    }
});

document.on("click", "button", function() {
    logger.log("create new window");

    var wnd = new Window({
        parent : Window.this,
        url    : __DIR__ + "window.html",
        state  : Window.WINDOW_SHOWN
    });
});

</script>
</head>
<body>
    <button />
    <plaintext #logger readonly />
</body>
</html>
